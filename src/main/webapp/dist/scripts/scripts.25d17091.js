!function(){"use strict";function a(a,b,c){a.when("/",{templateUrl:"views/main.html",controller:"MainController",controllerAs:"vm"}).when("/about",{templateUrl:"views/about.html",controller:"AboutController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),b.configure({key:"AIzaSyDIZgzM1EkYHEhOJfcjUvm0ovOUczk7v8s",v:"3.17",libraries:"weather,geometry,visualization"}),c.debugEnabled(!0)}a.$inject=["$routeProvider","uiGmapGoogleMapApiProvider","$logProvider"],angular.module("mediaqPoi",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","uiGmapgoogle-maps","Showdown"]).config(a)}(),function(){"use strict";function a(a,b,c){var d=this;d.videos=[],d.activeVideo={path:[],visible:!1,nearbyPois:[],visiblePois:[]},d.setActive=function(a){d.activeVideo=a,d.map.zoom=15,d.activeVideo.center={},d.activeVideo.radius=0,d.activeVideo.nearbyPois=[],d.activeVideo.visiblePois=[],b.getVideo(a.id).then(function(a){d.map.center=a.center,d.activeVideo.center=a.center,d.activeVideo.radius=a.searchRange,c(function(){angular.forEach(a.nearbyPois,function(a){a.icon="http://maps.google.com/mapfiles/ms/icons/blue-dot.png",a.options={title:a.name},d.activeVideo.nearbyPois.push(a)}),c(function(){d.activeVideo.center={},d.activeVideo.radius=0,d.activeVideo.nearbyPois=[],angular.forEach(a.visiblePois,function(a){a.icon="http://maps.google.com/mapfiles/ms/icons/green-dot.png",a.options={title:a.name},d.activeVideo.visiblePois.push(a)}),c(function(){d.map.center={latitude:d.activeVideo.latitude,longitude:d.activeVideo.longitude},d.map.zoom=19},2e3)},2e3)},2e3)})},a.then(function(a){d.map={center:{latitude:48.150529,longitude:11.595077},zoom:15},d.options={mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:a.ZoomControlStyle.LARGE,position:a.ControlPosition.LEFT_CENTER},panControl:!1,streetViewControl:!1},b.getVideos().then(function(a){d.videos=[];for(var b in a){var c=a[b],e=[],f=0,g=0,h=c.trajectory.timeStampedPoints;h.sort(function(a,b){return a.frame<b.frame?-1:a.frame>b.frame?1:0});for(var i in h){var j=h[i];e.push({latitude:j.latitude,longitude:j.longitude}),0===f&&0===g&&(f=j.latitude,g=j.longitude)}c.latitude=f,c.longitude=g,c.path=e,c.pathStyle={id:b,path:e,stroke:{color:"#6060FB",weight:3},visible:!0},c.icon="http://maps.google.com/mapfiles/ms/icons/red-dot.png",c.click=function(a){d.setActive(a.model)},d.videos.push(c)}})})}angular.module("mediaqPoi").controller("MainController",["uiGmapGoogleMapApi","dataService","$timeout",a])}(),function(){"use strict";function a(a,b){var c=this;a.get("views/readme.md").then(function(a){c.markdown=b.makeHtml(a.data)})}angular.module("mediaqPoi").controller("AboutController",["$http","$Showdown",a])}(),function(){"use strict";function a(a,b,c){function d(){var d=c.defer();return b.info("requesting videos."),a(f+"/videos").get(function(a){b.info("videos received ("+a.videos.length+"). returning."),d.resolve(a.videos)}),d.promise}function e(d){var e=c.defer();return b.info("requesting video "+d+"."),a(f+"/video/"+d).get(function(a){b.info("video received. returning."),e.resolve(a)}),e.promise}var f="";return"localhost:9000"===window.location.host&&(f="http://localhost:8888"),{getVideos:d,getVideo:e}}angular.module("mediaqPoi").factory("dataService",["$resource","$log","$q",a])}();