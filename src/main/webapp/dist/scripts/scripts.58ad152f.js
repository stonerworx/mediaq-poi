!function(){"use strict";function a(a,b,c){a.when("/",{templateUrl:"views/main.html",controller:"MainController",controllerAs:"vm"}).when("/about",{templateUrl:"views/about.html",controller:"AboutController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),b.configure({key:"AIzaSyDIZgzM1EkYHEhOJfcjUvm0ovOUczk7v8s",v:"3.17",libraries:"weather,geometry,visualization"}),c.debugEnabled(!0)}a.$inject=["$routeProvider","uiGmapGoogleMapApiProvider","$logProvider"],angular.module("mediaqPoi",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","uiGmapgoogle-maps","Showdown"]).config(a)}(),function(){"use strict";function a(a,b,c){var d=this;d.markers=[],d.nearbyPoiMarkers=[],d.visiblePoiMarkers=[],d.activeVideo=new c,d.loading=!1;var e=angular.element(".videoplayer video")[0];e.addEventListener("timeupdate",function(){var a=Math.round(e.currentTime);d.activeVideo.setSecond(a)},!1),d.clickMarker=function(a){d.openVideo(a.model.id)},d.closeVideo=function(){d.activeVideo=new c,e.pause(),d.map.zoom=15},d.openVideo=function(a){d.loading=!0,b.getVideo(a).then(function(a){d.loading=!1,d.activeVideo=a,d.nearbyPoiMarkers=d.activeVideo.getNearbyPoiMarkers(),d.visiblePoiMarkers=d.activeVideo.getVisiblePoiMarkers(),d.map.center=d.activeVideo.getCenter(),d.map.zoom=d.activeVideo.getZoomLevel(),d.activeVideo.show()})},a.then(function(a){d.map={center:{latitude:48.150529,longitude:11.595077},zoom:15},d.options={mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:a.ZoomControlStyle.LARGE,position:a.ControlPosition.LEFT_CENTER},panControl:!1,streetViewControl:!1},d.loading=!0,b.getVideos().then(function(a){d.loading=!1,angular.forEach(a,function(a){d.markers.push(a.getMarker())})})})}angular.module("mediaqPoi").controller("MainController",["uiGmapGoogleMapApi","dataService","VideoModel",a])}(),function(){"use strict";function a(a,b){var c=this;a.get("views/readme.md").then(function(a){c.markdown=b.makeHtml(a.data)})}angular.module("mediaqPoi").controller("AboutController",["$http","$Showdown",a])}(),function(){"use strict";function a(a,b,c,d){function e(){var e=c.defer();return b.info("requesting videos."),a(g+"/videos").get(function(a){b.info("videos received ("+a.videos.length+"). returning.");var c=[];angular.forEach(a.videos,function(a){c.push(new d(a))}),e.resolve(c)}),e.promise}function f(e){var f=c.defer();return b.info("requesting video "+e+"."),a(g+"/video/"+e).get(function(a){b.info("video received. returning.");var c=new d(a.video);c.setDetails(a),f.resolve(c)}),f.promise}var g="";return"localhost:9000"===window.location.host&&(g="http://localhost:8888"),{getVideos:e,getVideo:f}}angular.module("mediaqPoi").factory("dataService",["$resource","$log","$q","VideoModel",a])}(),function(){"use strict";function a(a,b){function c(c){var d=!1,e=!1,f=0,g=0,h=[],i={},j=0,k=[],l=[],m={},n=0;if(void 0!==c){d=c.key.name;var o=c.trajectory.timeStampedPoints;o.sort(function(a,b){return a.frame<b.frame?-1:a.frame>b.frame?1:0});for(var p in o){var q=o[p];h.push({latitude:q.latitude,longitude:q.longitude}),0===f&&0===g&&(f=q.latitude,g=q.longitude)}}var r=function(a){var b=[];return angular.forEach(a,function(a){b.push(a.getMarker())}),b};this.getId=function(){return d},this.show=function(){e=!0},this.hide=function(){e=!1},this.getVisible=function(){return e},this.getSrc=function(){return d?b.trustAsResourceUrl("http://mediaq.dbs.ifi.lmu.de/MediaQ_MVC_V2/video_content/"+c.fileName):""},this.getLatitude=function(){return f},this.getLongitude=function(){return g},this.getMarker=function(){return{id:this.getId(),latitude:this.getLatitude(),longitude:this.getLongitude(),icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}},this.setDetails=function(b){i=b.center,j=b.searchRange,angular.forEach(b.nearbyPois,function(b){k.push(new a(b))}),angular.forEach(b.visiblePois,function(b){l.push(new a(b))})},this.getCenter=function(){return i},this.getRadius=function(){return j},this.getZoomLevel=function(){return 17},this.getPath=function(){return h},this.getNearbyPois=function(){return k},this.getVisiblePois=function(){return l},this.getTimeline=function(){return m},this.getNearbyPoiMarkers=function(){return r(k)},this.getVisiblePoiMarkers=function(){return r(l)},this.setSecond=function(a){n=a},this.getSecond=function(){return n},this.getCurrentPois=function(){return[]}}return c}angular.module("mediaqPoi").factory("VideoModel",["PoiModel","$sce",a])}(),function(){"use strict";function a(){function a(a){var b=1,c=a.name,d=a.latitude,e=a.longitude;this.getId=function(){return b},this.getName=function(){return c},this.getLatitude=function(){return d},this.getLongitude=function(){return e},this.getMarker=function(){return{id:this.getId(),icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",latitude:this.getLatitude(),longitude:this.getLongitude(),options:{title:this.getName()}}}}return a}angular.module("mediaqPoi").factory("PoiModel",[a])}();